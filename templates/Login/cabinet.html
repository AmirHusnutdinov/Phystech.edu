{% extends "Base.html" %}
{% block content %}
<link rel="stylesheet" href="../../static/assets/css/style_cabinet.css">
<div class="body_cabinet">
    <div class="container">
        <h1 class="page-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>

        <div class="card profile-card">
            <h2 class="section-title">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
            <form id="profileForm">
                <div class="row">
                    <div class="form-group">
                        <div class="field-label">–õ–æ–≥–∏–Ω</div>
                        <div class="field-value" data-field="login" data-original="{{ user.login }}">{{ user.login }}</div>
                    </div>
                </div>
                <div class="row avatar-row">
                    <div class="form-group name-fields">
                        <div class="field-label">–ò–º—è</div>
                        <div class="field-value" data-field="firstName" data-original="{{ user.firstName }}">{{ user.firstName }}</div>
                        
                        <div class="field-label mt-3">–§–∞–º–∏–ª–∏—è</div>
                        <div class="field-value" data-field="lastName" data-original="{{ user.lastName }}">{{ user.lastName }}</div>
                    </div>
                    <div class="form-group avatar-container">
                        <div class="field-label">–ê–≤–∞—Ç–∞—Ä</div>
                        <div class="avatar-wrapper">
                            <img id="avatar-image" src="{{ user.avatar|default('/static/assets/img/default-avatar.png') }}" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                            <button type="button" id="changeAvatarBtn" class="btn avatar-btn" style="display: none;">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                            <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <div class="field-label">–ü–æ—á—Ç–∞</div>
                        <div class="field-value" data-field="email" data-original="{{ user.email }}">{{ user.email }}</div>
                    </div>
                    <div class="form-group">
                        <div class="field-label">–í–æ–∑—Ä–∞—Å—Ç</div>
                        <div class="field-value" data-field="age" data-type="number" data-original="{{ user.age }}">{{ user.age }}</div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <div class="field-label">–í–µ—Å (–∫–≥)</div>
                        <div class="field-value" data-field="weight" data-type="number" data-original="{{ user.weight }}">{{ user.weight }}</div>
                    </div>
                    <div class="form-group">
                        <div class="field-label">–†–æ—Å—Ç (—Å–º)</div>
                        <div class="field-value" data-field="height" data-type="number" data-original="{{ user.height }}">{{ user.height }}</div>
                    </div>
                    <div class="form-group">
                        <div class="field-label">–ü–æ–ª</div>
                        <div class="field-value" data-field="gender" data-type="select" data-original="{{ user.gender }}">
                            {% if user.gender == 'male' %}–ú—É–∂—Å–∫–æ–π{% else %}–ñ–µ–Ω—Å–∫–∏–π{% endif %}
                        </div>
                        <select id="gender-select" class="dropdown-select" style="display: none;">
                            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <div class="field-label">–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                        <div class="field-value" data-field="activity" data-type="select" data-original="{{ user.activity }}">
                            {% if user.activity == 'sedentary' %}
                                –°–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏
                            {% elif user.activity == 'light' %}
                                –õ–µ–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                            {% elif user.activity == 'moderate' %}
                                –£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                            {% elif user.activity == 'active' %}
                                –ê–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏
                            {% elif user.activity == 'very_active' %}
                                –û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏
                            {% endif %}
                        </div>
                        <select id="activity-select" class="dropdown-select" style="display: none;">
                            <option value="sedentary">–°–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</option>
                            <option value="light">–õ–µ–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
                            <option value="moderate">–£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</option>
                            <option value="very_active">–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</option>
                        </select>
                    </div>
                </div>
                <div class="button-container">
                    <button type="button" id="editButton" class="btn primary-btn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                    <button type="submit" id="saveButton" class="btn success-btn" style="display: none;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" id="cancelButton" class="btn cancel-btn" style="display: none;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>

        <div class="card nutrition-goals">
            <h2 class="section-title">–¶–µ–ª–∏ –ø–∏—Ç–∞–Ω–∏—è</h2>
            <div class="goals-buttons">
                <button id="weightLoss" class="btn goal-btn">
                    <span class="goal-icon">üìâ</span>
                    <span>–ü–æ—Ö—É–¥–µ–Ω–∏–µ</span>
                </button>
                <button id="weightMaintenance" class="btn goal-btn">
                    <span class="goal-icon">‚öñÔ∏è</span>
                    <span>–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞</span>
                </button>
                <button id="weightGain" class="btn goal-btn">
                    <span class="goal-icon">üìà</span>
                    <span>–ù–∞–±–æ—Ä –º–∞—Å—Å—ã</span>
                </button>
            </div>
            <div class="kbgu-container">
                <div class="kbgu-inputs">
                    <div class="form-group">
                        <div class="field-label">–ö–∞–ª–æ—Ä–∏–∏</div>
                        <div class="field-value nutrition-value" data-field="calories" data-type="number" data-original="{{ user['calories'] }}">{{ user['calories'] }}</div>
                    </div>
                    <div class="form-group">
                        <div class="field-label">–ë–µ–ª–∫–∏ (–≥)</div>
                        <div class="field-value nutrition-value" data-field="protein" data-type="number" data-original="{{ user['proteins'] }}">{{ user['proteins'] }}</div>
                    </div>
                    <div class="form-group">
                        <div class="field-label">–ñ–∏—Ä—ã (–≥)</div>
                        <div class="field-value nutrition-value" data-field="fats" data-type="number" data-original="{{ user['fats'] }}">{{ user['fats'] }}</div>
                    </div>
                    <div class="form-group">
                        <div class="field-label">–£–≥–ª–µ–≤–æ–¥—ã (–≥)</div>
                        <div class="field-value nutrition-value" data-field="carbs" data-type="number" data-original="{{ user['carbs'] }}">{{ user['carbs'] }}</div>
                    </div>
                </div>
                <div class="button-container">
                    <button id="editKBGU" class="btn primary-btn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                    <button id="saveKBGU" class="btn success-btn" style="display: none;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="cancelKBGU" class="btn cancel-btn" style="display: none;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="module" src="../../static/assets/js/cabinet.js"></script>
{% endblock %}

